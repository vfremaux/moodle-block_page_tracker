{"version":3,"sources":["../src/pagetracker.js"],"names":["define","$","log","cfg","init","bind","toggle","debug","that","url","wwwroot","itemid","attr","replace","blockid","courseid","subnodes","hasClass","removeClass","addClass","get"],"mappings":"AAkBAA,OAAM,kCAAC,CAAC,QAAD,CAAW,UAAX,CAAuB,aAAvB,CAAD,CAAwC,SAASC,CAAT,CAAYC,CAAZ,CAAiBC,CAAjB,CAAsB,CAyChE,MAvCkB,CAEdC,IAAI,CAAE,eAAW,CACbH,CAAC,CAAC,4BAAD,CAAD,CAAgCI,IAAhC,CAAqC,OAArC,CAA8C,KAAKC,MAAnD,EAEAJ,CAAG,CAACK,KAAJ,CAAU,8BAAV,CACH,CANa,CAQdD,MAAM,CAAE,iBAAW,IAEXE,CAAAA,CAAI,CAAGP,CAAC,CAAC,IAAD,CAFG,CAGXQ,CAAG,CAAGN,CAAG,CAACO,OAAJ,CAAc,uCAHT,CAIXC,CAAM,CAAGH,CAAI,CAACI,IAAL,CAAU,IAAV,EAAgBC,OAAhB,CAAwB,cAAxB,CAAwC,EAAxC,CAJE,CAKXC,CAAO,CAAGN,CAAI,CAACI,IAAL,CAAU,cAAV,CALC,CAMXG,CAAQ,CAAGP,CAAI,CAACI,IAAL,CAAU,eAAV,CANA,CAOfH,CAAG,EAAI,OAASM,CAAhB,CACAN,CAAG,EAAI,YAAcK,CAArB,CACAL,CAAG,EAAI,WAAaE,CAApB,CAEAT,CAAG,CAACK,KAAJ,CAAU,6BAA+BC,CAAI,CAACI,IAAL,CAAU,IAAV,CAAzC,EACA,GAAII,CAAAA,CAAQ,CAAGf,CAAC,CAAC,oBAAqBO,CAAI,CAACI,IAAL,CAAU,IAAV,CAArB,CAAuC,KAAxC,CAAhB,CACA,GAAII,CAAQ,CAACC,QAAT,CAAkB,WAAlB,CAAJ,CAAoC,CAChChB,CAAC,CAAC,IAAMO,CAAI,CAACI,IAAL,CAAU,IAAV,CAAN,CAAwB,IAAzB,CAAD,CAAgCM,WAAhC,CAA4C,SAA5C,EACAjB,CAAC,CAAC,IAAMO,CAAI,CAACI,IAAL,CAAU,IAAV,CAAN,CAAwB,IAAzB,CAAD,CAAgCO,QAAhC,CAAyC,UAAzC,EACAH,CAAQ,CAACE,WAAT,CAAqB,WAArB,EACAT,CAAG,EAAI,cACV,CALD,IAKO,CACHO,CAAQ,CAACG,QAAT,CAAkB,WAAlB,EACAlB,CAAC,CAAC,IAAMO,CAAI,CAACI,IAAL,CAAU,IAAV,CAAN,CAAwB,IAAzB,CAAD,CAAgCM,WAAhC,CAA4C,UAA5C,EACAjB,CAAC,CAAC,IAAMO,CAAI,CAACI,IAAL,CAAU,IAAV,CAAN,CAAwB,IAAzB,CAAD,CAAgCO,QAAhC,CAAyC,SAAzC,EACAV,CAAG,EAAI,gBACV,CAGDR,CAAC,CAACmB,GAAF,CAAMX,CAAN,CACH,CAnCa,CAwCrB,CA1CK,CAAN","sourcesContent":["\r\n// This file is part of Moodle - http://moodle.org/\r\n//\r\n// Moodle is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU General Public License as published by\r\n// the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// Moodle is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU General Public License\r\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\r\n\r\n// jshint unused: true, undef:true\r\n\r\ndefine(['jquery', 'core/log', 'core/config'], function($, log, cfg) {\r\n\r\n    var pagetracker = {\r\n\r\n        init: function() {\r\n            $('.pagetracker-toggle-handle').bind('click', this.toggle);\r\n\r\n            log.debug(\"AMD Page Tracker Initialized\");\r\n        },\r\n\r\n        toggle: function() {\r\n\r\n            var that = $(this);\r\n            var url = cfg.wwwroot + '/blocks/page_tracker/ajax/service.php';\r\n            var itemid = that.attr('id').replace('toggle-page-', '');\r\n            var blockid = that.attr('data-blockid');\r\n            var courseid = that.attr('data-courseid');\r\n            url += '?id=' + courseid;\r\n            url += '&blockid=' + blockid;\r\n            url += '&itemid=' + itemid;\r\n\r\n            log.debug(\"AMD Page Tracker : Got fo \" + that.attr('id'));\r\n            var subnodes = $('ul[data-parent=\"' + that.attr('id') + '\"]');\r\n            if (subnodes.hasClass('collapsed')) {\r\n                $('#' + that.attr('id') + ' i').removeClass('fa-plus');\r\n                $('#' + that.attr('id') + ' i').addClass('fa-minus');\r\n                subnodes.removeClass('collapsed');\r\n                url += '&what=expand';\r\n            } else {\r\n                subnodes.addClass('collapsed');\r\n                $('#' + that.attr('id') + ' i').removeClass('fa-minus');\r\n                $('#' + that.attr('id') + ' i').addClass('fa-plus');\r\n                url += '&what=collapse';\r\n            }\r\n\r\n            // Send session change.\r\n            $.get(url);\r\n        }\r\n\r\n    };\r\n\r\n    return pagetracker;\r\n});\r\n"],"file":"pagetracker.min.js"}