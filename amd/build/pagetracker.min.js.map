{"version":3,"file":"pagetracker.min.js","sources":["../src/pagetracker.js"],"sourcesContent":["\n// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n// jshint unused: true, undef:true\n\ndefine(['jquery', 'core/log', 'core/config'], function($, log, cfg) {\n\n    var pagetracker = {\n\n        init: function() {\n            $('.pagetracker-toggle-handle').bind('click', this.toggle);\n\n            log.debug(\"AMD Page Tracker Initialized\");\n        },\n\n        toggle: function(e) {\n\n            e.stopPropagation();\n\n            var that = $(this);\n            var url = cfg.wwwroot + '/blocks/page_tracker/ajax/service.php';\n            var itemid = that.attr('id').replace('toggle-page-', '');\n            var blockid = that.attr('data-blockid');\n            var courseid = that.attr('data-courseid');\n            url += '?id=' + courseid;\n            url += '&blockid=' + blockid;\n            url += '&itemid=' + itemid;\n\n            log.debug(\"AMD Page Tracker : Got for \" + that.attr('id'));\n            var subnodes = $('ul[data-parent=\"' + that.attr('id') + '\"]');\n            if (subnodes.hasClass('collapsed')) {\n                $('#' + that.attr('id') + ' i').removeClass('fa-plus');\n                $('#' + that.attr('id') + ' i').addClass('fa-minus');\n                subnodes.removeClass('collapsed');\n                url += '&what=expand';\n            } else {\n                subnodes.addClass('collapsed');\n                $('#' + that.attr('id') + ' i').removeClass('fa-minus');\n                $('#' + that.attr('id') + ' i').addClass('fa-plus');\n                url += '&what=collapse';\n            }\n\n            // Send session change.\n            $.get(url);\n        }\n\n    };\n\n    return pagetracker;\n});\n"],"names":["define","$","log","cfg","init","bind","this","toggle","debug","e","stopPropagation","that","url","wwwroot","itemid","attr","replace","blockid","subnodes","hasClass","removeClass","addClass","get"],"mappings":"AAkBAA,wCAAO,CAAC,SAAU,WAAY,gBAAgB,SAASC,EAAGC,IAAKC,WAEzC,CAEdC,KAAM,WACFH,EAAE,8BAA8BI,KAAK,QAASC,KAAKC,QAEnDL,IAAIM,MAAM,iCAGdD,OAAQ,SAASE,GAEbA,EAAEC,sBAEEC,KAAOV,EAAEK,MACTM,IAAMT,IAAIU,QAAU,wCACpBC,OAASH,KAAKI,KAAK,MAAMC,QAAQ,eAAgB,IACjDC,QAAUN,KAAKI,KAAK,gBAExBH,KAAO,OADQD,KAAKI,KAAK,iBAEzBH,KAAO,YAAcK,QACrBL,KAAO,WAAaE,OAEpBZ,IAAIM,MAAM,8BAAgCG,KAAKI,KAAK,WAChDG,SAAWjB,EAAE,mBAAqBU,KAAKI,KAAK,MAAQ,MACpDG,SAASC,SAAS,cAClBlB,EAAE,IAAMU,KAAKI,KAAK,MAAQ,MAAMK,YAAY,WAC5CnB,EAAE,IAAMU,KAAKI,KAAK,MAAQ,MAAMM,SAAS,YACzCH,SAASE,YAAY,aACrBR,KAAO,iBAEPM,SAASG,SAAS,aAClBpB,EAAE,IAAMU,KAAKI,KAAK,MAAQ,MAAMK,YAAY,YAC5CnB,EAAE,IAAMU,KAAKI,KAAK,MAAQ,MAAMM,SAAS,WACzCT,KAAO,kBAIXX,EAAEqB,IAAIV,MAMjB"}