define(["jquery","core/log","core/config"],function(a,b,c){var d={init:function(){a(".pagetracker-toggle-handle").bind("click",this.toggle),b.debug("AMD Page Tracker Initialized")},toggle:function(){var d=a(this),e=c.wwwroot+"/blocks/page_tracker/ajax/service.php",f=d.attr("id").replace("toggle-page-",""),g=d.attr("data-blockid"),h=d.attr("data-courseid");e+="?id="+h,e+="&blockid="+g,e+="&itemid="+f,b.debug("AMD Page Tracker : Got fo "+d.attr("id"));var i=a('ul[data-parent="'+d.attr("id")+'"]');i.hasClass("collapsed")?(a("#"+d.attr("id")+" i").removeClass("fa-plus"),a("#"+d.attr("id")+" i").addClass("fa-minus"),i.removeClass("collapsed"),e+="&what=expand"):(i.addClass("collapsed"),a("#"+d.attr("id")+" i").removeClass("fa-minus"),a("#"+d.attr("id")+" i").addClass("fa-plus"),e+="&what=collapse"),a.get(e)}};return d});